{# If image is not set, get fallback #}
{% set img = img is not empty ? img : g.img_placeholder %}

{% if img %}
{# If there is an image without any predefined formats #}

    {% if image_format is empty %}
    <picture>
        <source media="(max-width: 500px)"  type="image/jpg" srcset="{{ img.sizes.thumbnail }}">
        <source media="(max-width: 900px)"  type="image/jpg" srcset="{{ img.sizes.medium }}">
        {% if is_fs == true %}
            <source media="(min-width: 900px)" type="image/jpg" srcset="{{ img.sizes.large }}">
        {% endif %}
        <img loading="lazy" alt="{{ img.alt }}" src="{{ img.sizes.medium }}">
    </picture>

    {% else %}

    {# If there is a predefined image format, no need for "picture" element #}
    <img width="{{ img.sizes[image_format].width }}" height="{{ img.sizes[image_format].height }}" src="{{ img.sizes[image_format] }}" alt="{{ img.alt }}">

    {% endif %}
{% endif %}



{# If there is no image at all, get the static image fallback #}
{% if img is empty %}
    <img width="500" height="500" src="{{ theme.link }}/assets/static/placeholder_image.svg" alt="Logo de {{ site.name }} - Aucune image trouvÃ©e">
{% endif %}

{% set img = null %}
{% set image_format = null %}
{% set is_fs = false %}